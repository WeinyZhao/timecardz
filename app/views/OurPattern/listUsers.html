#{extends './userTemplate.html' /}

<h4>Users</h4>

<div id="addEditPatternDiv">  </div>

<table class="table">
    <thead>
        <tr>
            <th>Id</th>
            <th>Email</th>
            <th>SomethingElse</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        #{list users, as:'user'}
            <tr>
                <td> ${user.id}</td>
                <td>${user.email}</td>
                <td></td>
                <td>
                        *{ TODO: We need to add javascript to 
                                1. make ajax call
                                2. in the return ajax call(the one that is passed the data from server), we then popup modal and fill in
                         }*
                        <a href="#" data-toggle="modal" class="btn btn-primary" id="editLink_${user_index-1}">
                            Edit
                        </a>
                        <p style="clear: both;">
                           <script type="text/javascript">
                            var getAddEditPattern= #{jsAction @OurPattern.ajaxUser(':id') /}
                             $(document).ready(function() {	
                                 $("#editLink_${user_index-1}").click(function(e){
                                     $('#addEditPatternDiv').load(getAddEditPattern({id:${user.id}}),function(){
                                         $("#addEditPatternModal").modal('show');	
                                      });
                                 });
                       	    });
                            </script>
</p>
                        <a href="#deleteModal_${user.id}" data-toggle="modal">
                            Delete
                        </a>
                </td>
            </tr>
        #{/list}
        #{else}
        <tr>
            <td colspan="4">
            There are no users, Add one now please.
            </td>
        </tr>
        #{/else}
    </tbody>
</table>

                        *{ TODO: We need to add javascript to 
                                1. make ajax call
                                2. in the return ajax call(the one that is passed the data from server), we then popup modal and fill in
                         }*
<a href="#" class="btn btn-primary" id="addLink">Add User</a>
<p style="clear: both;">
    <script type="text/javascript">
    var getAddEditPattern= #{jsAction @ajaxAddEdit(':id') /}
    $(document).ready(function() {	
        $("#addLink").click(function(e){
            $('#addEditPatternDiv').load(getAddEditPattern(),function(){
                 $("#addEditPatternModal").modal('show');	
            });
        });
  	});
  	</script>
</p>